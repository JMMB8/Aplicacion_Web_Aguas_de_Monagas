"use strict";login.factory("LoginService",["$http","$q",function($http,$q){return{login:function(bean){return $http.post(apiUrl+"/login",bean).then(function(response){console.info("login "+response);return response.data},function(errResponse){alert(i18n("common.address.notuseful"))})},refresh:function(bean){return $http.get(apiUrl+"/refresh",bean).then(function(response){console.info("refresh "+response);return response.data},function(errResponse){handleAjaxError(errResponse);return response.data})},getConsumer:function(consumerName){return $http.get(apiUrl+"/consumerUser?userName="+consumerName).then(function(response){console.info("getConsumer "+response);return response.data},function(errResponse){handleAjaxError(errResponse);return errResponse.data})},getAppNotice:function(start,length){return $http.get(apiUrl+"/notice/getAppNotice?type=20&start="+start+"&length="+length).then(function(response){console.info("getAppNotice "+response);return response.data},function(errResponse){return errResponse.data})},downloadApp:function(type,platformType){return $http.get(apiUrl+"/app/getApp?type="+type+"&platformType="+platformType+"&start=0&length=10").then(function(response){console.info("getAppNotice "+response.data.body[0].fileUrl);return response.data;if(response.data.body[0]!=null&response.data.body[0].fileUrl!=null){return apiUrl+"/app/downloadApp?fileName="+fileName}return apiUrl+"/app/downloadApp?fileName=error.log"},function(errResponse){return errResponse.data})},exit:function(){return $http.patch(apiUrl+"/logout").then(function(response){window.location="home.html"},function(errResponse){})},getConsumerBalance:function(consumerName){return $http.get(apiUrl+"/consumerUser/queryBalance?userName="+consumerName).then(function(response){console.info(" getConsumerBalance "+response);return response.data},function(errResponse){handleAjaxError(errResponse);return errResponse.data})}}}]);